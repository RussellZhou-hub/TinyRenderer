cmake_minimum_required(VERSION 3.10...4.13)
project("TinyRenderer" LANGUAGES CXX)
set(CMAKE_CXX_STANDARD 17)
set(CMAKE_CXX_STANDARD_REQUIRED ON)

include_directories( ${CMAKE_CURRENT_SOURCE_DIR}/tgaimage/ )

add_definitions("-DUNICODE" "-D_UNICODE")

file(GLOB_RECURSE TinyRenderer_SOURCES
    "${CMAKE_CURRENT_SOURCE_DIR}/*.h"
    "${CMAKE_CURRENT_SOURCE_DIR}/*.cpp"
    "${CMAKE_CURRENT_SOURCE_DIR}/tgaimage/*.h"
    "${CMAKE_CURRENT_SOURCE_DIR}/tgaimage/*.cpp"
)

# 排除 build 文件夹中的所有文件
foreach(file ${TinyRenderer_SOURCES})
    if(${file} MATCHES ".*/build/.*")
        list(REMOVE_ITEM TinyRenderer_SOURCES ${file})
    endif()
endforeach()

# 打印 SRC_FILES 中的所有文件
message(STATUS "Collected source files:")
foreach(file ${TinyRenderer_SOURCES})
    message(STATUS "  ${file}")
endforeach()


add_executable(TinyRenderer
    ./tgaimage/tgaimage.h
    ./tgaimage/tgaimage.cpp
    ${TinyRenderer_SOURCES}
)



target_link_directories(TinyRenderer PRIVATE 
	${CMAKE_CURRENT_SOURCE_DIR}/tgaimage/
)

